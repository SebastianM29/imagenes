(()=>{"use strict";const e=new class{constructor(){this.URI="http://localhost:8060/libros"}async getBooks(){const e=await fetch(this.URI);return await e.json()}async postBooks(e){const t=await fetch(this.URI,{method:"POST",body:e}),o=await t.json();console.log(o)}async deleteBooks(e){const t=await fetch(`${this.URI}/${e}`,{headers:{"content-type":"application/json"},method:"DELETE"}),o=await t.json();console.log(o)}},t=class{async renderBooks(){const t=await e.getBooks();console.log(t);const o=document.getElementById("books-cards");console.log(document.getElementById("books-cards")),o.innerHTML="",t.forEach((e=>{const t=document.createElement("div");t.className="",t.innerHTML=`\n    <div class="card m-2"> \n     <div class="row">\n        \n        <div class="col-md-4">\n         <img src="http://localhost:8060${e.imagepath}" alt="" class="img-fluid"/>\n        </div>\n        \n        <div class="col-md-8">\n          <div class="card-block px-2">\n            <h4 class="card-title">${e.title}</h4>\n            <p class="card-text">${e.author}</p>\n            <a href="#" class="btn btn-danger delete" _id="${e._id}">X</a>\n          </div>\n        </div>\n      </div>\n      <div class="card-footer">\n      \n     ${e.created_at}\n    </div>\n    `,o.appendChild(t)}))}async addAnewBooks(t){await e.postBooks(t),this.clearBooksForm(),this.renderBooks()}clearBooksForm(){document.getElementById("book-form").reset()}RenderMessage(e,t,o){const n=document.createElement("div");n.className=`alert alert-${t} message`,n.appendChild(document.createTextNode(e));const s=document.querySelector(".col-md-4"),a=document.querySelector("#book-form");s.insertBefore(n,a),setTimeout((()=>{document.querySelector(".message").remove()}),o)}async deleteBook(t){await e.deleteBooks(t),this.renderBooks()}},o=new t;document.addEventListener("DOMContentLoaded",(()=>{(new t).renderBooks()})),document.getElementById("book-form").addEventListener("submit",(e=>{const t=document.getElementById("title").value,n=document.getElementById("author").value,s=document.getElementById("isbn").value,a=document.getElementById("image").files,d=new FormData;d.append("image",a[0]),d.append("title",t),d.append("author",n),d.append("isbn",s),o.addAnewBooks(d),o.RenderMessage("contenido cargado","success",1500),e.preventDefault()})),document.getElementById("books-cards").addEventListener("click",(e=>{if(e.target.classList.contains("delete")){const o=new t;o.deleteBook(e.target.getAttribute("_id")),o.RenderMessage("libro eliminado","danger",1500)}e.preventDefault()}))})();